#!/usr/bin/env bash

set -e

# Auto-detect whether to use main/master
default_branch=$(git branch | grep -Ew "main|master" | sed "s/\* //")

# Just print the names
# If you're on a branch that has been merged (has a "*"), don't print it
git branch --merged "$default_branch" | grep -v "\*" | grep -Evw "$default_branch"

echo "Use 'git-clean-branches | xargs git branch -d' to actually delete these." >&2